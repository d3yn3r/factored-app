{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\deine\\\\Desktop\\\\Login\\\\frontend\\\\src\\\\context\\\\UserContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst apiUrl = process.env.REACT_APP_API_URL;\nconst fetchUser = async token => {\n  const requestOptions = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + token\n    }\n  };\n  // make the request\n  const response = await fetch(`${apiUrl}/api/users/profile`, requestOptions);\n  return response.json();\n};\nexport const UserContext = /*#__PURE__*/createContext(null);\nexport const UserProvider = props => {\n  _s();\n  const [token, setToken] = useState(localStorage.getItem(\"factoredLoginToken\"));\n  const [user, setUser] = useState(null);\n\n  // use the token, send a request to the /users/me and if it's ok the token is valid\n  useEffect(() => {\n    localStorage.setItem(\"factoredLoginToken\", token !== null && token !== void 0 ? token : \"\");\n    if (token) {\n      fetchUser(token).then(setUser);\n    }\n  }, [token]);\n  return (\n    /*#__PURE__*/\n    // to make the token and setToken accessible they are passed as a prop\n    _jsxDEV(UserContext.Provider, {\n      value: {\n        token,\n        setToken,\n        user,\n        setUser\n      },\n      children: props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }, this)\n  );\n};\n_s(UserProvider, \"loCA02bMyS3DWRAMyHk18Uh2CwM=\");\n_c = UserProvider;\nvar _c;\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","jsxDEV","_jsxDEV","apiUrl","process","env","REACT_APP_API_URL","fetchUser","token","requestOptions","method","headers","Authorization","response","fetch","json","UserContext","UserProvider","props","_s","setToken","localStorage","getItem","user","setUser","setItem","then","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/deine/Desktop/Login/frontend/src/context/UserContext.jsx"],"sourcesContent":["import React, {createContext, useEffect, useState} from \"react\";\n\n\nconst apiUrl = process.env.REACT_APP_API_URL;\n\nconst fetchUser = async token => {\n    const requestOptions = {\n        method: \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + token,\n        },\n    };\n    // make the request\n    const response = await fetch(`${apiUrl}/api/users/profile`, requestOptions);\n    return response.json();\n};\n\nexport const UserContext = createContext(null)\n\nexport const UserProvider = (props) => {\n    const [token, setToken] = useState(localStorage.getItem(\"factoredLoginToken\"));\n    const [user, setUser] = useState(null);\n\n    // use the token, send a request to the /users/me and if it's ok the token is valid\n    useEffect(() => {\n        localStorage.setItem(\"factoredLoginToken\", token ?? \"\");\n        if (token) {\n            fetchUser(token).then(setUser);\n        }\n    }, [token]);\n\n    return (\n        // to make the token and setToken accessible they are passed as a prop\n        <UserContext.Provider value={{token, setToken, user, setUser}}>\n            {props.children}\n        </UserContext.Provider>\n    )\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGhE,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;AAE5C,MAAMC,SAAS,GAAG,MAAMC,KAAK,IAAI;EAC7B,MAAMC,cAAc,GAAG;IACnBC,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MACL,cAAc,EAAE,kBAAkB;MAClCC,aAAa,EAAE,SAAS,GAAGJ;IAC/B;EACJ,CAAC;EACD;EACA,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEX,MAAO,oBAAmB,EAAEM,cAAc,CAAC;EAC3E,OAAOI,QAAQ,CAACE,IAAI,CAAC,CAAC;AAC1B,CAAC;AAED,OAAO,MAAMC,WAAW,gBAAGlB,aAAa,CAAC,IAAI,CAAC;AAE9C,OAAO,MAAMmB,YAAY,GAAIC,KAAK,IAAK;EAAAC,EAAA;EACnC,MAAM,CAACX,KAAK,EAAEY,QAAQ,CAAC,GAAGpB,QAAQ,CAACqB,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAC,CAAC;EAC9E,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGxB,QAAQ,CAAC,IAAI,CAAC;;EAEtC;EACAD,SAAS,CAAC,MAAM;IACZsB,YAAY,CAACI,OAAO,CAAC,oBAAoB,EAAEjB,KAAK,aAALA,KAAK,cAALA,KAAK,GAAI,EAAE,CAAC;IACvD,IAAIA,KAAK,EAAE;MACPD,SAAS,CAACC,KAAK,CAAC,CAACkB,IAAI,CAACF,OAAO,CAAC;IAClC;EACJ,CAAC,EAAE,CAAChB,KAAK,CAAC,CAAC;EAEX;IAAA;IACI;IACAN,OAAA,CAACc,WAAW,CAACW,QAAQ;MAACC,KAAK,EAAE;QAACpB,KAAK;QAAEY,QAAQ;QAAEG,IAAI;QAAEC;MAAO,CAAE;MAAAK,QAAA,EACzDX,KAAK,CAACW;IAAQ;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG;EAAC;AAE/B,CAAC;AAAAd,EAAA,CAlBYF,YAAY;AAAAiB,EAAA,GAAZjB,YAAY;AAAA,IAAAiB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}